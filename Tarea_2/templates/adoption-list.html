{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/adoption-list.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/adoption-form.css') }}">
{% endblock %}

{% block title %}Adoptar{% endblock %}

{% block content %}
<!-- Contenedor de listado -->
<div class="listado-casilla">
    <div class="listado">
        <!-- Encabezados -->
        <div class="listado-header">
            <div class="listado-cabeza">Fecha Publicación</div>
            <div class="listado-cabeza">Fecha Entrega</div>
            <div class="listado-cabeza">Comuna</div>
            <div class="listado-cabeza">Sector</div>
            <div class="listado-cabeza">Cantidad / Tipo / Edad</div>
            <div class="listado-cabeza">Nombre Contacto</div>
            <div class="listado-cabeza">Total Fotos</div>
        </div>
        <!-- Filas con datos -->
        <div class="listado-body">
            {% if avisos %}
            {% for aviso in avisos %}
            <div class="listado-fila" data-id="{{ aviso.id }}">
                <div class="listado-celda">{{ aviso.fecha_publicacion.strftime('%d-%m-%Y') if aviso.fecha_publicacion else 'N/A' }}</div>
                <div class="listado-celda">{{ aviso.fecha_entrega.strftime('%d-%m-%Y') if aviso.fecha_entrega else 'N/A' }}</div>
                <div class="listado-celda">{{ aviso.comuna }}</div>
                <div class="listado-celda">{{ aviso.sector }}</div>
                <div class="listado-celda">{{ aviso.cantidad }} / {{ aviso.tipo }} / {{ aviso.edad }}</div>
                <div class="listado-celda">{{ aviso.nombre_contacto }}</div>
                <div class="listado-celda">{{ aviso.total_fotos if aviso.total_fotos else 0 }}</div>
            </div>
            {% endfor %}
            {% else %}
            <div class="listado-vacio">
                <p>No hay avisos de adopción disponibles en este momento.</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<!-- Contenedor detalle -->
<div id="detalle-container" style="display:none;">
    <h2>Detalle del Aviso</h2>
    <div id="detalle-info"></div>
    <div id="detalle-fotos"></div>
    <button id="volver-listado">Volver al listado</button>
    <button id="volver-portada" onclick="window.location.href='{{ url_for('index') }}'">Volver a la portada</button>
</div>

<!-- Contenedor para foto clickeada -->
<div id="foto-clickeada" style="display:none;">
</div>
{% endblock %}

{% block extra_js %}
<script type="module" src="{{ url_for('static', filename='scripts/javascript/adoption-list.js') }}"></script>
{% endblock %}